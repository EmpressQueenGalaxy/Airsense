<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AirSense - Visor Geoespacial</title>
    <!-- Librer√≠a Leaflet para mapas interactivos -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- Estilos CSS propios -->
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>

    <!-- saltar directamente al mapa sin pasar por el header o filtros -->
    <a href="#map" class="sr-only enlace-saltar">
      Saltar al contenido principal
    </a>
    
    <!-- ========================= HEADER ========================= -->
    <!-- Encabezado global de la aplicaci√≥n -->
    <header class="header" role="banner" aria-labelledby="titulo-sitio">
      <div class="header__contenido">
        <h1 class="header__titulo" id="titulo-sitio">üåç AirSense</h1>

        <!-- Bot√≥n para alternar entre modo claro y modo oscuro -->
        <button
          id="btnModoOscuro"
          class="btn-modo-oscuro"
          aria-label="Alternar modo oscuro"
          aria-pressed="false"
        >
          <span class="icono-sol" aria-hidden="true">‚òÄÔ∏è</span>
          <span class="icono-luna" aria-hidden="true">üåô</span>
          <span id="estado-modo" class="sr-only">Modo claro activo</span>
        </button>
      </div>
    </header>

    <!-- ========================= CONTENIDO PRINCIPAL ========================= -->
    <main role="main">
      <div class="contenedor">
        <!-- T√≠tulo principal de la secci√≥n -->
        <h1>üó∫Ô∏è Visor geoespacial sobre la calidad del aire</h1>
         <!-- ========================= FILTROS ========================= -->
        <div class="filtros-contenedor" role="search" aria-labelledby="titulo-filtros" aria-describedby="instruccion-filtros">
          <h2 id="titulo-filtros" class="sr-only">Filtros del mapa geoespacial</h2>
          <p id="instruccion-filtros" class="sr-only">
            Usa estos filtros para elegir municipio, a√±o, estaci√≥n y contaminante. Los controles se habilitar√°n progresivamente.
          </p>

          <!-- üìç MUNICIPIO -->
          <div class="filtro-item">
            <label for="selectMunicipio">üìç Municipio:</label>
            <select id="selectMunicipio" class="selector-municipio"
                    aria-describedby="ayuda-municipio estado-municipio" aria-busy="false">
              <option value="">-- Selecciona un municipio --</option>
            </select>
            <p id="ayuda-municipio" class="sr-only">Selecciona un municipio para habilitar los dem√°s filtros.</p>
            <div id="estado-municipio" class="sr-only" aria-live="polite"></div>
          </div>

          <!-- üìÖ A√ëO -->
          <div class="filtro-item">
            <label for="selectAnio">üìÖ A√±o:</label>
            <select id="selectAnio" class="selector-municipio"
                    aria-describedby="ayuda-anio estado-anio" disabled>
              <option value="">-- Primero selecciona municipio --</option>
            </select>
            <p id="ayuda-anio" class="sr-only">Selecciona un a√±o despu√©s de elegir el municipio.</p>
            <div id="estado-anio" class="sr-only" aria-live="polite"></div>
          </div>

          <!-- üè≠ ESTACI√ìN -->
          <div class="filtro-item">
            <label for="selectEstacion">üè≠ Estaci√≥n:</label>
            <select id="selectEstacion" class="selector-municipio"
                    aria-describedby="ayuda-estacion estado-estacion" disabled>
              <option value="">-- Primero selecciona a√±o --</option>
            </select>
            <p id="ayuda-estacion" class="sr-only">Selecciona una estaci√≥n de monitoreo despu√©s de elegir el a√±o.</p>
            <div id="estado-estacion" class="sr-only" aria-live="polite"></div>
          </div>

          <!-- ‚öóÔ∏è CONTAMINANTE -->
          <div class="filtro-item">
            <label for="selectContaminante">‚öóÔ∏è Contaminante:</label>
            <select id="selectContaminante" class="selector-municipio"
                    aria-describedby="ayuda-contaminante estado-contaminante" disabled>
              <option value="">-- Primero selecciona estaci√≥n --</option>
            </select>
            <p id="ayuda-contaminante" class="sr-only">Selecciona un contaminante despu√©s de elegir la estaci√≥n.</p>
            <div id="estado-contaminante" class="sr-only" aria-live="polite"></div>
          </div>


          <!-- üóëÔ∏è LIMPIAR -->
          <div class="filtro-item filtro-item--boton">
            <label aria-hidden="true">&nbsp;</label>
            <button id="btnLimpiarFiltros" class="btn-limpiar-filtros"
                    title="Limpiar todos los filtros"
                    aria-label="Limpiar todos los filtros y reiniciar el mapa"
                    aria-describedby="ayuda-limpiar">
              üóëÔ∏è Limpiar
            </button>
            <p id="ayuda-limpiar" class="sr-only">
              Restablece todos los filtros a su valor predeterminado y limpia el mapa.
            </p>
            <div id="estado-limpiar" class="sr-only" aria-live="polite"></div>
          </div>
        </div>

         <!-- ========================= VISTA PRINCIPAL ========================= -->
        <div class="vista-principal">
          
          <aside class="panel-informacion" role="region" aria-labelledby="titulo-instrucciones">
            <div id="informacionContaminantes" class="panel-instrucciones" tabindex="0" aria-live="polite" aria-atomic="true">

              <h2 id="titulo-instrucciones"> C√≥mo usar la aplicaci√≥n üåç</h2>
              <p>
                Explora 13 a√±os de datos hist√≥ricos (2011-2023) de calidad del aire en el Valle del Cauca
              </p>

              <ol class="pasos" aria-label="Instrucciones de uso del mapa">
                <li class="paso paso1">
                  <div class="paso-numero">PASO 1
                    <div class="paso-texto">
                      üìç Selecciona un <b>municipio</b> del Valle del Cauca
                    </div>
                  </div>
                </li>
                <li class="paso paso2">
                  <div class="paso-numero">PASO 2
                    <div class="paso-texto">
                      üéØ Haz <b>clic en una estaci√≥n</b> de monitoreo
                    </div>
                  </div>
                </li>
                <li class="paso paso3">
                  <div class="paso-numero">PASO 3
                    <div class="paso-texto">
                      üß™ Escoge un <b>contaminante</b> atmosf√©rico
                    </div>
                  </div>
                </li>
                <li class="paso paso4">
                  <div class="paso-numero">PASO 4</div>
                  <div class="paso-texto">
                    üìä Consulta <b>datos y l√≠mites OMS</b>
                  </div>
                </li>
              </ol>

              <!-- Contenedor invisible para lectura de pasos por el lector de pantalla -->
              <div id="lecturaPasos" class="sr-only" aria-live="polite"></div>

            </div> 
          </aside>


          <!-- Mapa principal -->
          <div class="vista-principal__mapa">
            
            <div id="estadoMapa" class="estado-mapa" role="status" aria-live="polite">
              <span id="statusVisible" aria-hidden="true"></span>
              <span id="statusAccesible" class="sr-only">Cargando mapa, por favor esperar</span>
            </div>

            <div id="map" class="mapa" role="application"  tabindex="0" 
              aria-label="Mapa interactivo de calidad del aire en el Valle del Cauca"
              aria-describedby="mapa-descripcion "> </div>
              
            <p id="mapa-descripcion" class="sr-only">
              Mapa interactivo que muestra estaciones de monitoreo del aire. 
              Puedes hacer clic en los marcadores para ver informaci√≥n detallada.
            </p>
          </div> 
          
        <!-- Panel derecho: Diccionario -->
        <aside id="diccionario" class="panel-diccionario" role="complementary"
              aria-labelledby="titulo-diccionario" aria-describedby="descripcion-diccionario">

          <p id="descripcion-diccionario" class="sr-only">
            Panel lateral con informaci√≥n detallada sobre contaminantes atmosf√©ricos y su clasificaci√≥n seg√∫n la OMS 2021.
          </p>

          <h2 class="diccionario__titulo" id="titulo-diccionario">Diccionario de Contaminantes</h2>

          <!-- Vista de lista -->
          <div id="vistaLista" class="diccionario__vista diccionario__vista--activa"
              tabindex="0" aria-hidden="false" aria-live="polite">
            
            <div class="diccionario__leyenda-compacta">
              <h5 class="leyenda-compacta__titulo">
                üìä Calidad del Aire (OMS 2021)
              </h5>
              <div class="leyenda-compacta__grid">
                <div class="leyenda-compacta__item">
                  <span class="leyenda-compacta__color leyenda-color-buena"></span>
                  <span class="leyenda-compacta__texto">Buena</span>
                </div>
                <div class="leyenda-compacta__item">
                  <span class="leyenda-compacta__color leyenda-color-moderada"></span>
                  <span class="leyenda-compacta__texto">Moderada</span>
                </div>
                <div class="leyenda-compacta__item">
                  <span class="leyenda-compacta__color leyenda-color-mala"></span>
                  <span class="leyenda-compacta__texto">Mala</span>
                </div>
              </div>
            </div>

            <p class="diccionario__intro">
              Explora los principales contaminantes atmosf√©ricos monitoreados
              en el Valle del Cauca.
            </p>
            <ul id="listaContaminantes" class="diccionario__lista"></ul>
          </div>

          <!-- Vista de detalle -->
          <div id="vistaDetalle" class="diccionario__vista" aria-hidden="true" aria-live="polite" tabindex="-1">
            
            <button id="btnVolver" class="diccionario__btn-volver" 
                    aria-label="Volver a la lista de contaminantes" aria-controls="vistaLista"
                    aria-expanded="false">
              ‚Üê Volver
            </button>

            <article id="contenidoDetalle" class="diccionario__detalle" tabindex="0" role="region" aria-live="polite" aria-label="Detalle del contaminante"></article>
          </div>

        </aside>

        </div><!-- FIN vista-principal -->
      </div> <!-- FIN contenedor -->
    </main>
    
    <!-- Zona invisible para mensajes de lector de pantalla -->
    <div id="aria-live-region" class="sr-only" aria-live="polite" aria-atomic="true"></div>


     <!-- ========================= SCRIPTS ========================= -->
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"  defer></script>
    <!-- Cliente API para obtener datos -->
    <script src="/js/apiClient.js" defer></script>
    <!-- Script javascript -->
    <script src="/js/mapascript.js" defer></script>
    <script src="/js/uiscript.js" defer></script>
    <script src="./js/script.js" defer></script>

    <!-- Script Diccionario-->
    <script src="/js/diccionario.js" defer></script>
    <script src="/js/accesibilidad.js" defer></script>

  </body>
</html>
